<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-177425497-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Release 5.0 | Kotest</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://kotest.io/docs/blog/release_5.0"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Release 5.0 | Kotest"><meta data-react-helmet="true" name="description" content="**This document is a work in progress and will be finalized within a few days of the 5.0 release.**"><meta data-react-helmet="true" property="og:description" content="**This document is a work in progress and will be finalized within a few days of the 5.0 release.**"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://kotest.io/docs/blog/release_5.0"><link data-react-helmet="true" rel="alternate" href="https://kotest.io/docs/blog/release_5.0" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://kotest.io/docs/blog/release_5.0" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ba064302.css">
<link rel="preload" href="/assets/js/runtime~main.0f6b8ab1.js" as="script">
<link rel="preload" href="/assets/js/main.cab5088f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Kotest" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.png" alt="Kotest" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Kotest</b></a><a class="navbar__item navbar__link" href="/docs/quickstart">Overview</a><a class="navbar__item navbar__link" href="/docs/framework/framework.html">Framework</a><a class="navbar__item navbar__link" href="/docs/extensions/extensions.html">Extensions</a><a class="navbar__item navbar__link" href="/docs/assertions/assertions.html">Assertions</a><a class="navbar__item navbar__link" href="/docs/proptest/property-based-testing.html">Property Testing</a><a class="navbar__item navbar__link" href="/docs/intellij/intellij-plugin.html">Intellij Plugin</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/kotest/kotest/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Issue Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/kotest/kotest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Release 5.0</h1></header><p><em><strong>This document is a work in progress and will be finalized within a few days of the 5.0 release.</strong></em></p><ul><li><a href="#breaking-changes">Breaking Changes</a></li><li><a href="#deprecations">Deprecations</a></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="breaking-changes">Breaking Changes<a aria-hidden="true" class="hash-link" href="#breaking-changes" title="Direct link to heading">â€‹</a></h2><h4 class="anchor anchorWithStickyNavbar_31ik" id="kotlin-16-is-now-the-minimum-supported-version">Kotlin 1.6 is now the minimum supported version<a aria-hidden="true" class="hash-link" href="#kotlin-16-is-now-the-minimum-supported-version" title="Direct link to heading">â€‹</a></h4><p>From version 5 onwards, Kotest requires Kotlin 1.6. The decision to do this is twofold.</p><p>Firstly, the main feature in the 5.0
release train is support for multiplatform tests and there are incompatibilities in the compiler between Kotlin 1.5 and 1.6. To support both
would add needless complexity to the build.</p><p>Secondly, <code>kotlin.time.Duration</code>&#x27;s have finally gone stable as of 1.6 and Kotest
builds on these internally. We wanted to be able to depend on the multiplatform functionality provided by Kotlin durations without
any issues arising from changes in these classes from previous versions.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="legacy-javascript-compiler-support-dropped">Legacy Javascript compiler support dropped<a aria-hidden="true" class="hash-link" href="#legacy-javascript-compiler-support-dropped" title="Direct link to heading">â€‹</a></h4><p>Javascript support for the <em>legacy</em> compiler is no longer supported. If you are running tests on JS legacy then you will need to continue using Kotest 4.6.x or set your Javascript test build to use only use the IR compiler.</p><p>Test support for the legacy Javascript compiler relied on functionality that has been removed in the IR compiler (Namely, that the
<a href="https://kotlinlang.org/api/latest/kotlin.test/kotlin.test/-framework-adapter/" target="_blank" rel="noopener noreferrer">framework adapter</a> no longer works with third
party modules). For the 5.0 release, Kotest provides a compiler plugin which integrates tests directly into the compiled output exactly
how the kotlin.test support works.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="global-configuration-object-dropped">Global configuration object dropped<a aria-hidden="true" class="hash-link" href="#global-configuration-object-dropped" title="Direct link to heading">â€‹</a></h4><p>In previous versions Kotest supported configuration updates via a global configuration object called <code>configuration</code> (and called <code>project</code> in even earlier versions).
From this release onwards, this top level val has been removed.</p><p>The reason for the removal is that having global state complicated using multiple instances of the Test Engine in the same JVM and
also because there was not precise semanatics around the orders of updates to a top level val.</p><p>The former was mainly an issue when testing Kotest itself, since users don&#x27;t typically create instances of <code>TestEngine</code>
directly but instead run tests via gradle or intellij.</p><p>This top level val was not included in documentation so users should have been largely unaware it existed anyway. The
recommended approach to defining Kotest configuration remains
either <a href="https://kotest.io/docs/framework/project-config.html" target="_blank" rel="noopener noreferrer">ProjectConfig</a>
or <a href="https://kotest.io/docs/framework/framework-config-props.html" target="_blank" rel="noopener noreferrer">system properties</a>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="experimental-data-testing-classes-moved">Experimental data testing classes moved<a aria-hidden="true" class="hash-link" href="#experimental-data-testing-classes-moved" title="Direct link to heading">â€‹</a></h4><p>The experimental data-test <code>withData</code> functions added in 4.5 under the package name <code>io.kotest.datatest</code> have moved to a new module <code>kotest-framework-datatest</code>.</p><p>Note: These are separate from the <code>forAll</code> and <code>forNone</code> data test functions which have been part of Kotest since version 2.0.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="deprecated-property-test-arbvalue-removed">Deprecated property test Arb.value removed<a aria-hidden="true" class="hash-link" href="#deprecated-property-test-arbvalue-removed" title="Direct link to heading">â€‹</a></h4><p>The <code>Arb.values()</code> method has been removed from the <code>Arb</code> interface. This method was deprecated in 4.3 in favour of using <code>Arb.sample</code> which was introduced to allow for Arb flat-mapping. This will only affect anyone who has written a custom arb that extends <code>Arb</code> directly and is still using the deprecated method. Any existing uses of the <code>arbitrary</code> builders is unaffected and those builders are always the preferred way to create custom arbitraries.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="startup-configuration-dump-off-by-default">Startup configuration dump off by default<a aria-hidden="true" class="hash-link" href="#startup-configuration-dump-off-by-default" title="Direct link to heading">â€‹</a></h4><p>The Engine no longer logs config to the console during start <strong>by default</strong>. To enable output, set the system property or env var <code>kotest.framework.dump.config</code> to true.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="deprecated-method-removals">Deprecated method removals<a aria-hidden="true" class="hash-link" href="#deprecated-method-removals" title="Direct link to heading">â€‹</a></h4><ul><li><code>shouldReceiveWithin</code> and <code>shouldReceiveNoElementsWithin</code> channel matchers have been removed.</li><li>The deprecated <code>RuntimeTagExtension</code> has been undeprecated but moved to a new package.</li><li><code>RuntimeTagExpressionExtension</code> has moved to a new package.</li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="inspector-changes">Inspector changes.<a aria-hidden="true" class="hash-link" href="#inspector-changes" title="Direct link to heading">â€‹</a></h4><p>When using inspectors, the deprecated <code>kotlintest.assertions.output.max</code> system property has been removed.
This was replaced with <code>kotest.assertions.output.max</code> in release 4.0 when the project was renamed
from KotlinTest to Kotest.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="deprecations">Deprecations<a aria-hidden="true" class="hash-link" href="#deprecations" title="Direct link to heading">â€‹</a></h2><h4 class="anchor anchorWithStickyNavbar_31ik" id="test-status">Test Status<a aria-hidden="true" class="hash-link" href="#test-status" title="Direct link to heading">â€‹</a></h4><p>The <code>TestStatus</code> enum has been deprecated in favour of the <code>TestResult</code> ADT. Instead of matching on<code>result.status</code> in <code>AfterTestListener</code> you should now match directly on the result. Eg</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">when (result) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  is TestResult.Success -&gt; ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  is TestResult.Error -&gt; ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="specextensioninterceptkclass-method-deprecation">SpecExtension.intercept(KClass) method deprecation<a aria-hidden="true" class="hash-link" href="#specextensioninterceptkclass-method-deprecation" title="Direct link to heading">â€‹</a></h4><p>The <code>intercept(KClass)</code> method in SpecExtension has been deprecated and <code>SpecRefExtension</code> has been added. The deprecated method had ambigious behavior when used with an <code>IsolationMode</code> that created multiple instances of a spec. The new methods have precise guarantees of when they will execute.</p><ul><li><code>SpecRefExtension</code>s will execute once per class.</li><li><code>SpecExtension</code>s will execute once per instance.</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="default-test-case-config">Default test case config<a aria-hidden="true" class="hash-link" href="#default-test-case-config" title="Direct link to heading">â€‹</a></h3><p>The <code>defaultTestCaseConfig</code> containers in Spec&#x27;s and project configuration have been deprecated. This is because it was not possible to specify at both the spec level and the project-configuration level and allow settings to fall through.</p><p>Instead, you should set per-setting defaults, and these will fall through from test -&gt; spec -&gt; configuration.</p><p>For example, instead of this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class MySpec: FunSpec() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  init {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    override fun defaultTestCaseConfig() = TestCaseConfig(tags = setOf(Foo, Bar), timeout = 100.seconds)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    test(&quot;foo&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // will time out after 100 seconds and has tags Foo and Bar applied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You should do:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class MySpec: FunSpec() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  init {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags(Foo, Bar)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout = 100.seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    test(&quot;foo&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       // will time out after 100 seconds and has tags Foo and Bar applied</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that the second variation has always been possible, but the first variation is no longer recommended.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="listener-names">Listener names<a aria-hidden="true" class="hash-link" href="#listener-names" title="Direct link to heading">â€‹</a></h4><p>The <code>val name</code> inside <code>Listener</code> has been deprecated. This was used so that errors from multiple before/after spec callbacks could appear with customized unique names. The framework now takes ensures that names are unique so this val is no longer needed and is now ignored.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="other-deprecations">Other deprecations<a aria-hidden="true" class="hash-link" href="#other-deprecations" title="Direct link to heading">â€‹</a></h4><ul><li><code>SpecInstantiationListener</code> has been deprecated in favour of <code>InstantiationListener</code> and <code>InstantiationErrorListener</code>,
both of which support suspension functions. <code>SpecInstantiationListener</code> is a hold-over from before coroutines existed
in Kotlin and so had no support for coroutines.</li><li><code>SpecIgnoredListner</code> (note the typo) has been renamed to <code>IgnoredSpecListener</code>.</li><li>The <code>listeners</code> method to add listeners to a Spec has been deprecated. When adding listeners to specs directly, you
should now prefer <code>extensions()</code> rather than <code>listeners()</code>.</li><li><code>CompareMode</code> /<code>CompareOrder</code> for <code>shouldEqualJson</code> has been deprecated in favor of <code>compareJsonOptions { }</code></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/kotest/kotest/blob/master/documentation/docs/blog/release_5.0.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#deprecations" class="table-of-contents__link toc-highlight">Deprecations</a><ul><li><a href="#default-test-case-config" class="table-of-contents__link toc-highlight">Default test case config</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://kotlinlang.slack.com/archives/CT0G9SD7Z" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/kotest/kotest" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/kotest" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Kotest Team. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.0f6b8ab1.js"></script>
<script src="/assets/js/main.cab5088f.js"></script>
</body>
</html>